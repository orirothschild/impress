<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Docker..What Are You? | by Ori Rothschild</title>
    
    <meta name="author" content="Henrik Ingo" />
    <link href="css/classic-slides.css" rel="stylesheet" />
    
</head>
<body class="impress-not-supported">
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>


<div id="impress" data-transition-duration="1000">

    <div id="overview" class="step" data-x="3000" data-y="1500" data-z="-1" data-scale="10"
         style="pointer-events: none;">
        <img src="./images/docker-logo.png" alt="Large tree" width="1600"
            style="position: inherit; top: -600px; left: -200px" />
            
    </div>
    
    <div class="step title" data-x="-1750" data-y="5200" data-scale="2.5" id="title">
        <h1>What is it, exactly?</h1>
        <h2>by Ori Rothschild<br /><br />
        <br />
        </h2>
        <p style="text-align: right;"><small>v2</small></p>
    </div>
     
    <div id="overview" class="step" data-x="3000" data-y="1500" data-z="-1" data-scale="10" data-autoplay="0.1">
    </div>

    <div class="step" data-x="650" data-y="5000" data-rotate-y="0" data-scale="1"
         id="topics">
        <h1>The questions we shall tackle</h1>
        <ol>
            <li>What is Docker?</li>
            <li>Why use it?</li>
            <li>How does it work?</li>
        </ol>
    </div>

    <div class="step" id="compression"  data-x="100" data-y="8000" data-scale="2">
            <blockquote><p class="quotation"> 
                   Docker is an Amazing Tool,anyone who uses it is garrenteed succsess</p>
                  <footer>— Ori Rothschild</footer>
                  </blockquote> 
                  <blockquote><p class="quotation"> 
                       i once said the word Docker in a meeting,everyone was so impressed i was instantly made CEO</p>
                       <footer>— O.R</footer>
                       </blockquote> 
                       <blockquote><p class="quotation"> 
                            i used the word Docker at the bar,guess who got lucky?</p>
                            <footer>— some dude who got lucky</footer>
                            </blockquote> 
    </div>
    
    <div id="big" class="step" data-x="5000" data-y="10500" data-z="100" data-scale="20">
            <h5>Docker makes a  <b>big</b><p> statement </p> </h5>
            <h3>if it runs on my machine, it will run on yours</h3>
        </div>

        <div class="step" data-x="3150" data-y="8000"  data-scale="1"  id="demo"  >
          <h2 >In a nutshell, here's what Docker can do for you </h2>

          <ul class="substep"  data-autoplay="1.2">
                <li>it makes it easy for developers to quickly create ready-to-run containered applications; and it makes managing and deploying applications easy.</li>
                <li>  it  makes it easier to create, deploy, and run applications by using containers. </li>
                                    <li> Containers allow a developer to package up an application with all of the parts it needs such as libraries and other dependencies</li>
                </ul>
    </div>

   

 
       
     

    <div class="step" data-rel-x="-150" data-rel-y="1700" data-rel-z="-10" data-rotate-y="180" id="h_ingo">

        
        <img src="images/diagrams-05 - redis.png" width="700" height="550" 
            style="position: inherit; top: -420px; left: 350px" />
        <img src="images/eco.jpg"  width="400" height="300"
        style="position: inherit; top: 170px; left: 300px" />

    </div>
    <div class="step" data-rel-z="10000" data-rel-y="0" data-scale="1.2">
            <div class="arrow_down" position="relative">
                    <h4 style="text-align:center">Docker <strong>Client</strong><p>tool that we are going to issue commands to</p></h4>
                </div>

            <div class="arrow_up"margin-top="12px"position="-600px">
                    <h4 style="text-align:center">Docker <strong>Deamon</strong><p>tool that is responsible for running images,containers,etc</p></h4>
                </div>
    </div>
    
    <div class="step" style="text-align: center"data-rel-z="2000" data-rel-x="-2000" data-rel-y="0" data-rotate-y="90" data-scale="0.8">
              <div id="imagination" data-scale="2">
          <p>the single file with all the dependencies and configurations required to run a program is called an <b>image</b></p>
            </div>
            <div class="arrow_box" >
                    <h4 style="text-align:center"> node.js Image </h4>
                </div>
                <div class="imagination" data-scale="2">
                    <div id="demos" data-rel-z="10" data-x="3350" data-y="100000"  ><h4 style="text-align:bottom;margin-top: 100px"><br /> node.js Container </h4></div>
                        <p style="text-align: center; margin-top:50px">an instance of a created image is called a  <b>Container</b></p>
                          </div>
            
           </div>



    
    
    <div class="step" data-rel-z="1000" data-rel-x="1000" data-rel-y="000" data-scale="0.8" data-rotate-y="180"  data-rotate-x="12">
        
        <img src="images/diagrams-08 - flow (1).svg" width="1300" height="650" 
        style="position: inherit; top: -330px; left: -50px" />
        <div class="arrow_up"style=" position:bottom;bottom:-300px; ;right:150px;">
                    <h4 style="text-align:center">Docker run<strong> Flow</strong></h4>
                </div>

    </div>

    

    <div class="step" id="singleton" data-rel-z="-1000" data-rel-x="1600" data-rel-y="000" data-rotate-y="270" data-scale="2">
            <h1 style="position:fixed; top: -290px; left:200px" >a Quick View Of our Operation System</h1>
            <img width="1000" src="images/diagrams-09 - kernel.png"   style="position:fixed; top: -140px; left: 0px"
                 class="right" />
    
            
        </div>
    
       
    
        <div class="step title" id="throttling" data-rel-z="13000" data-rotate="-90" data-x="1500" data-y="4200" data-scale="3">
                <img width="790" src="images/diagrams-10 - kernel.svg"   style="position: fixed;left:120px;bottom: -300px"
                     class="right" />
        </div>
        
            <div class="step" data-rel-z="000" data-rel-x="-300" data-rel-y="-2500" data-rotate="0">
                <img width="1100" height="1200" data-rel-z="1000" src="images/diagrams-14 - container.svg"   style="position: fixed;left:70px;bottom: -500px"
                 />
               
                   
            </div>
    
            
            <div class="step" data-rel-x="-000" data-rel-y="-1600" data-rotate="-90">
                <img width="1400" height="1200" data-rel-z="1000" src="images/diagrams-16 - cont to image (1).svg"   style="position: fixed;left:-70px;bottom: -500px"
                />
            </div>
                            <div class="step" data-rel-z="253000" data-rel-x="-00"   data-rel-y="-50000" data-rotate="-90" data-rotate-x="10">
                                    <h1 class="big">last   <b>boring</b><p> diagram </p> </h5>
                              
                            </div>
    
        <div id="benchmark" class="step" data-rel-x="-1200" data-rel-y="-900" data-rotate="-180">
                <div  class="step" data-rel-x="-1200" data-rel-y="-900" data-rotate="-180">
            <h1 style="position:fixed; top: -290px; left:200px "data-rotate="-90">here is the <b>Magic</b></h1>
                </div>
            <img width="800" height="700" data-rel-z="1000" src="images/diagrams-15 - stack.svg"   style="position: fixed;left:200px;bottom: -300px"
            />
           
            <div class="notes">
    <pre>
    $ ./bin/ycsb load mongodb-async -s -P workloads/throttlingtest -threads 30
    $ cat workloads/throttlingtest 
    mongodb.url=mongodb://throttl-4.henrikingo3.8300.mongodbdns.com:27017/test
    mongodb.batchsize=100
    recordcount=50000000
    
    
    operationcount=1000
    workload=com.yahoo.ycsb.workloads.CoreWorkload
    
    readallfields=true
    
    readproportion=0.5
    updateproportion=0.5
    scanproportion=0
    insertproportion=0
    
    requestdistribution=zipfian
    </pre>
            </div>
        </div>
    
        <div class="step" data-rel-x="0" data-rel-y="-900" data-rotate="-180">
           <img src="images/ycsb-load-1.png" />
        </div>
    
        <div class="step" data-rel-x="0" data-rel-y="-900" data-rotate="-180">
           <img src="images/ycsb-load-2.png" />
        </div>
    
        <div class="step" data-scale="3" data-rel-y="-1400" data-rotate="-180">
            <h1>What did we learn?</h1>
            <ul>
            <li>A naive insert / load test is not distributed well over all shards</li>
            <li>With throttling on, balancer will not keep up = unbalanced cluster</li>
            <li>With throttling off, balancer will keep up
                <ul>
                <li>Note: this is still an inefficient way of loading data into MongoDB</li>
                <li>Point is just that the balancer is able to keep up</li>
                </ul>
            </li>
            <li>The default in MongoDB 3.4 is <em>throttling off</em></li>
            </ul>
        </div>
    
        <div class="step title" id="parallel" data-rel-x="-4000" data-rel-y="0" data-rotate="-230">
            <h1>5. Parallel chunk migrations</h1>
        </div>
    
        <div class="step" style="text-align: center" data-rel-x="-4000" data-rel-y="-300" data-rotate="-280">
            <img src="images/balancer-new-shard.svg" alt="MongoDB sharded cluster with a chunk migration happening"/>
            <p>As with initial sync, adding a new shard to a cluster is easy. Just add an empty shard, and the balancer starts moving data to it.</p>
        </div>
    
        <div class="step" style="text-align: center" data-rel-x="-4000" data-rel-y="-300" data-rotate="-280">
            <h1>At scale, ops become more interesting...</h1>
            <img src="images/balancer-scale-10.svg" alt="MongoDB sharded cluster with 10 shards"
                 style="position: inherit; top: 40px; left: 340px"/>
            <img src="images/balancer-scale-32.svg" alt="MongoDB sharded cluster with 20 shards and 1 migration happening"
                 style="position: inherit; top: 40px; left: 340px" class="substep" />
            <p class="substep" style="margin-top: 260px;"><strong>MongoDB 3.2:</strong> Only 1 migration at a time.<br />
                                                          All new shards but one remain empty. <br />
                                                          The DBA just needs to wait... but how long?</p>
            <p class="substep"><strong>MongoDB 3.4:</strong> N/2 migrations at a time.<br />
                               Double nr of shards in same time as adding 1 shard.</p>
            <img src="images/balancer-scale-34.svg" alt="MongoDB sharded cluster with 20 shards and 10 migrations happening"
                 style="position: inherit; top: 40px; left: 340px" class="substep" />
        </div>
    
        <div class="step" id="future" data-x="-30000" data-y="9000" data-z="8000" data-rotate-x="-95" data-rotate-y="-55" data-transition-duration="5000">
            <h1>Future work</h1>
            <ul>
            <li><a href="https://jira.mongodb.org/browse/SERVER-27760"><strike>SERVER-27760</strike></a> Smarter, stateful orphan deletion (3.6)</li>
            <li><a href="https://jira.mongodb.org/browse/SERVER-5931"><strike>SERVER-5931</strike></a> Secondary reads in a sharded cluster (3.6)</li>
            <li><a href="https://jira.mongodb.org/browse/SERVER-20739">SERVER-20739</a> Make initial sync resilient to network/other failures</li>
            <li><a href="https://jira.mongodb.org/browse/SERVER-9287">SERVER-9287</a> Split chunks on mongod, not mongos</li>
            <li>Maybe make chunk migrations even faster?
                <ul>
                <li>Bulk inserts</li>
                <li>More than one per shard</li>
                </ul>
    
    </div>
    

    

    <div class="step" id="future" data-x="-30000" data-y="9000" data-z="8000" data-rotate-x="-95" data-rotate-y="-55" data-transition-duration="5000">
        <h1><strong>Thank you</strong></h1>

</div>
<div id="impress-toolbar"></div>
<div id="impress-help"></div>

<script type="text/javascript" src="js/impress.js"></script>
<script>impress().init();</script>
</body>
</html>
